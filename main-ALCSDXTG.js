import{f as Me,g as I,h as V,m as we,n as B,p as Ae,u as be}from"./chunk-4ZGJNR2A.js";import{a as ve}from"./chunk-FCOTV2SP.js";import{a as ye}from"./chunk-WWMWQHCN.js";import"./chunk-IJEGB2ZK.js";import{a as ge,h as L}from"./chunk-SJ34BFYK.js";import{a as x}from"./chunk-APUHJM44.js";import"./chunk-VSLMR3JL.js";import"./chunk-C57FOMMB.js";import{a as k,b as fe,c as _,f as U,g as W,j as C}from"./chunk-YMAZRRKX.js";import{$b as de,A as Z,Aa as ce,C as K,D as v,E as y,Ha as H,Ia as b,K as d,M as ie,S as oe,W as A,Y as ne,Z as se,Za as Y,_a as le,a as Q,aa as u,ab as P,ba as a,bc as ue,cb as F,da as ae,eb as q,ec as he,fa as c,fb as M,ga as O,l as ee,la as D,ma as l,nc as j,p as S,pa as T,q as te,t as p,ub as pe,vb as G,wb as E,x as re,xc as me,y as z,zc as $}from"./chunk-YEEZGBIQ.js";var Ce=(()=>{class t{constructor(e,r){this.router=e,this.authService=r}get currentRoute(){return this.router.url.split("/")[1]||"home"}get userType(){return this.authService.getCurrentUser()?.type||"customer"}get servicesLabel(){return this.userType==="worker"?"\u062E\u062F\u0645\u0627\u062A\u064A":"\u0637\u0644\u0628\u0627\u062A\u064A"}static{this.\u0275fac=function(r){return new(r||t)(Y(W),Y(x))}}static{this.\u0275cmp=D({type:t,selectors:[["app-main-layout"]],decls:4,vars:0,consts:[["dir","rtl",1,"app-container"],[1,"pb-20"]],template:function(r,o){r&1&&(pe(0,"div",0)(1,"main",1),E(2,"router-outlet"),G(),E(3,"app-nav-bar"),G())},dependencies:[U,ge],styles:["[_nghost-%COMP%]{display:block;min-height:100vh}main[_ngcontent-%COMP%]{min-height:calc(100vh - 136px)}.active-link[_ngcontent-%COMP%]{color:#ef4444}.custom-title[_ngcontent-%COMP%]{font-family:Changa,Marhey,Ruwudu,sans-serif;font-size:2em}"]})}}return t})();var m=(()=>{class t{constructor(e,r){this.authService=e,this.router=r}canActivate(e,r){return this.authService.currentUser$.pipe(d(1),p(o=>{let s=r.url;return o?e.data?.roles&&!e.data.roles.includes(o.type)?this.router.createUrlTree(["/"]):!0:(localStorage.setItem("returnUrl",s),this.router.createUrlTree(["/auth/welcome"]))}))}canActivateChild(e,r){return this.canActivate(e,r)}static{this.\u0275fac=function(r){return new(r||t)(c(x),c(W))}}static{this.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Le=[{path:"",component:Ce,children:[{path:"",loadChildren:()=>import("./chunk-SZGGR3I2.js").then(t=>t.HomeModule),canActivate:[m]},{path:"profile",loadChildren:()=>import("./chunk-SY6RWAYA.js").then(t=>t.ProfileModule),canActivate:[m]},{path:"services",loadChildren:()=>import("./chunk-P4WTYUNL.js").then(t=>t.ServicesModule),canActivate:[m]},{path:"requests",loadChildren:()=>import("./chunk-PIMY2TK2.js").then(t=>t.RequestsModule),canActivate:[m]},{path:"messages",loadChildren:()=>import("./chunk-R5G2ILGJ.js").then(t=>t.MessagesModule),canActivate:[m]},{path:"discover",loadChildren:()=>import("./chunk-SQTXOIGF.js").then(t=>t.DiscoverModule),canActivate:[m]},{path:"worker/:id",component:ve}]},{path:"auth",loadChildren:()=>import("./chunk-JOFKZIWW.js").then(t=>t.AuthModule)}],Ie=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=l({type:t})}static{this.\u0275inj=a({imports:[C.forRoot(Le),C]})}}return t})();var Ne=(()=>{class t{constructor(){this.title="sanai3i"}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=D({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(r,o){r&1&&E(0,"router-outlet")},dependencies:[U]})}}return t})();var Re=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=l({type:t})}static{this.\u0275inj=a({imports:[me,C,L]})}}return t})();var R="Service workers are disabled or not supported by this browser";function Ve(t){return z(()=>te(new Error(t)))}var w=class{constructor(i){if(this.serviceWorker=i,!i)this.worker=this.events=this.registration=Ve(R);else{let r=Z(i,"controllerchange").pipe(p(()=>i.controller)),o=z(()=>S(i.controller)),s=re(o,r);this.worker=s.pipe(y(g=>!!g)),this.registration=this.worker.pipe(A(()=>i.getRegistration()));let J=Z(i,"message").pipe(p(g=>g.data)).pipe(y(g=>g&&g.type)).pipe(oe());J.connect(),this.events=J}}postMessage(i,e){return this.worker.pipe(d(1),ne(r=>{r.postMessage(Q({action:i},e))})).toPromise().then(()=>{})}postMessageWithOperation(i,e,r){let o=this.waitForOperationCompleted(r),s=this.postMessage(i,e);return Promise.all([s,o]).then(([,n])=>n)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(i){let e;return typeof i=="string"?e=r=>r.type===i:e=r=>i.includes(r.type),this.events.pipe(y(e))}nextEventOfType(i){return this.eventsOfType(i).pipe(d(1))}waitForOperationCompleted(i){return this.eventsOfType("OPERATION_COMPLETED").pipe(y(e=>e.nonce===i),d(1),p(e=>{if(e.result!==void 0)return e.result;throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},Te=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,this.pushManager=null,this.subscriptionChanges=new ee,!e.isEnabled){this.messages=v,this.notificationClicks=v,this.subscription=v;return}this.messages=this.sw.eventsOfType("PUSH").pipe(p(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(p(o=>o.data)),this.pushManager=this.sw.registration.pipe(p(o=>o.pushManager));let r=this.pushManager.pipe(A(o=>o.getSubscription()));this.subscription=K(r,this.subscriptionChanges)}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(R));let r={userVisibleOnly:!0},o=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(o.length));for(let n=0;n<o.length;n++)s[n]=o.charCodeAt(n);return r.applicationServerKey=s,this.pushManager.pipe(A(n=>n.subscribe(r)),d(1)).toPromise().then(n=>(this.subscriptionChanges.next(n),n))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(R));let e=r=>{if(r===null)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(o=>{if(!o)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(d(1),A(e)).toPromise()}decodeBase64(e){return atob(e)}static{this.\u0275fac=function(r){return new(r||t)(c(w))}}static{this.\u0275prov=u({token:t,factory:t.\u0275fac})}}return t})(),Pe=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=v,this.unrecoverable=v;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(R));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(R));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static{this.\u0275fac=function(r){return new(r||t)(c(w))}}static{this.\u0275prov=u({token:t,factory:t.\u0275fac})}}return t})();var Se=new ae("");function Be(t,i,e,r){return()=>{if(!($(r)&&"serviceWorker"in navigator&&e.enabled!==!1))return;navigator.serviceWorker.addEventListener("controllerchange",()=>{navigator.serviceWorker.controller!==null&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})});let o;if(typeof e.registrationStrategy=="function")o=e.registrationStrategy();else{let[n,...f]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(n){case"registerImmediately":o=S(null);break;case"registerWithDelay":o=Oe(+f[0]||0);break;case"registerWhenStable":o=f[0]?K(De(t),Oe(+f[0])):De(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}t.get(M).runOutsideAngular(()=>o.pipe(d(1)).subscribe(()=>navigator.serviceWorker.register(i,{scope:e.scope}).catch(n=>console.error("Service worker registration failed with:",n))))}}function Oe(t){return S(null).pipe(ie(t))}function De(t){return t.get(ue).isStable.pipe(y(e=>e))}function ze(t,i){return new w($(i)&&t.enabled!==!1?navigator.serviceWorker:void 0)}var N=class{};function Ze(t,i={}){return T([Te,Pe,{provide:Se,useValue:t},{provide:N,useValue:i},{provide:w,useFactory:ze,deps:[N,H]},{provide:de,useFactory:Be,deps:[ce,Se,N,H],multi:!0}])}var Fe=(()=>{class t{static register(e,r={}){return{ngModule:t,providers:[Ze(e,r)]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=l({type:t})}static{this.\u0275inj=a({providers:[Te,Pe]})}}return t})();var Ke=(()=>{class t extends B{constructor(e,r,o){super(e,r,o,O(P,{optional:!0}))}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(r){return new(r||t)(c(j),c(I),c(V))}}static{this.\u0275prov=u({token:t,factory:t.\u0275fac})}}return t})();function He(){return new we}function Ye(t,i,e){return new be(t,i,e)}var ke=[{provide:V,useFactory:He},{provide:B,useClass:Ke},{provide:F,useFactory:Ye,deps:[k,B,M]}],je=[{provide:I,useFactory:()=>new Ae},{provide:b,useValue:"BrowserAnimations"},...ke],qe=[{provide:I,useClass:Me},{provide:b,useValue:"NoopAnimations"},...ke],_e=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?qe:je}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=l({type:t})}static{this.\u0275inj=a({providers:je,imports:[_]})}}return t})();var Ge="@",$e=(()=>{class t{constructor(e,r,o,s,n){this.doc=e,this.delegate=r,this.zone=o,this.animationType=s,this.moduleImpl=n,this._rendererFactoryPromise=null,this.scheduler=O(P,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-T6BHZJX5.js")).catch(r=>{throw new se(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:o})=>{this._engine=r(this.animationType,this.doc,this.scheduler);let s=new o(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(e,r){let o=this.delegate.createRenderer(e,r);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let s=new X(o);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(n=>{let f=n.createRenderer(e,r);s.use(f)}).catch(n=>{s.use(o)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(r){le()}}static{this.\u0275prov=u({token:t,factory:t.\u0275fac})}}return t})(),X=class{constructor(i){this.delegate=i,this.replay=[],this.\u0275type=1}use(i){if(this.delegate=i,this.replay!==null){for(let e of this.replay)e(i);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(i,e){return this.delegate.createElement(i,e)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}get destroyNode(){return this.delegate.destroyNode}appendChild(i,e){this.delegate.appendChild(i,e)}insertBefore(i,e,r,o){this.delegate.insertBefore(i,e,r,o)}removeChild(i,e,r){this.delegate.removeChild(i,e,r)}selectRootElement(i,e){return this.delegate.selectRootElement(i,e)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,e,r,o){this.delegate.setAttribute(i,e,r,o)}removeAttribute(i,e,r){this.delegate.removeAttribute(i,e,r)}addClass(i,e){this.delegate.addClass(i,e)}removeClass(i,e){this.delegate.removeClass(i,e)}setStyle(i,e,r,o){this.delegate.setStyle(i,e,r,o)}removeStyle(i,e,r){this.delegate.removeStyle(i,e,r)}setProperty(i,e,r){this.shouldReplay(e)&&this.replay.push(o=>o.setProperty(i,e,r)),this.delegate.setProperty(i,e,r)}setValue(i,e){this.delegate.setValue(i,e)}listen(i,e,r){return this.shouldReplay(e)&&this.replay.push(o=>o.listen(i,e,r)),this.delegate.listen(i,e,r)}shouldReplay(i){return this.replay!==null&&i.startsWith(Ge)}};function Ue(t="animations"){return q("NgAsyncAnimations"),T([{provide:F,useFactory:(i,e,r)=>new $e(i,e,r,t),deps:[j,k,M]},{provide:b,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var We=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=l({type:t,bootstrap:[Ne]})}static{this.\u0275inj=a({providers:[Ue()],imports:[_,Re,L,Ie,_e,ye,Fe.register("ngsw-worker.js",{enabled:!he(),registrationStrategy:"registerWhenStable:30000"})]})}}return t})();fe().bootstrapModule(We).catch(t=>console.error(t));
