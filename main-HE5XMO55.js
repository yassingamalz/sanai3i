import{f as Ae,g as I,h as V,m as be,n as B,p as Ee,u as Ce}from"./chunk-HLCSQKYV.js";import{a as Me}from"./chunk-RELTTBB3.js";import{a as we}from"./chunk-IFUL2MFH.js";import"./chunk-7RNM54PL.js";import"./chunk-VKVBXFPH.js";import{a as x,b as ye,z as L}from"./chunk-7SFZSXWL.js";import{b as fe,c as ge,d as k,e as ve,f as _,i as U,j as W,m as C}from"./chunk-F2X4653R.js";import{Ab as $,B as H,Ba as ce,Bb as E,D as Z,E as v,F as y,Ja as K,Ka as b,Kc as me,L as u,Mc as X,N as ie,T as oe,X as A,Z as ne,_ as se,a as Q,ab as Y,ba as a,bb as le,ca as c,db as P,ea as ae,fb as F,ga as l,ha as O,hb as G,hc as de,ib as M,jc as ue,l as ee,ma as T,mc as he,na as p,q as S,qa as D,r as te,u as d,wc as j,y as re,z,zb as pe}from"./chunk-XI6D2FU6.js";var Ne=(()=>{class t{constructor(e,r){this.router=e,this.authService=r}get currentRoute(){return this.router.url.split("/")[1]||"home"}get userType(){return this.authService.getCurrentUser()?.type||"customer"}get servicesLabel(){return this.userType==="worker"?"\u062E\u062F\u0645\u0627\u062A\u064A":"\u0637\u0644\u0628\u0627\u062A\u064A"}static{this.\u0275fac=function(r){return new(r||t)(Y(W),Y(x))}}static{this.\u0275cmp=T({type:t,selectors:[["app-main-layout"]],decls:4,vars:0,consts:[["dir","rtl",1,"app-container"],[1,"pb-20"]],template:function(r,o){r&1&&(pe(0,"div",0)(1,"main",1),E(2,"router-outlet"),$(),E(3,"app-nav-bar"),$())},dependencies:[U,ye],styles:["[_nghost-%COMP%]{display:block;min-height:100vh}main[_ngcontent-%COMP%]{min-height:calc(100vh - 136px)}.active-link[_ngcontent-%COMP%]{color:#ef4444}.custom-title[_ngcontent-%COMP%]{font-family:Changa,Marhey,Ruwudu,sans-serif;font-size:2em}"]})}}return t})();var m=(()=>{class t{constructor(e,r){this.authService=e,this.router=r}canActivate(e,r){return this.authService.currentUser$.pipe(u(1),d(o=>{let s=r.url;return o?e.data?.roles&&!e.data.roles.includes(o.type)?this.router.createUrlTree(["/"]):!0:(localStorage.setItem("returnUrl",s),this.router.createUrlTree(["/auth/welcome"]))}))}canActivateChild(e,r){return this.canActivate(e,r)}static{this.\u0275fac=function(r){return new(r||t)(l(x),l(W))}}static{this.\u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ze=[{path:"",component:Ne,children:[{path:"",loadChildren:()=>import("./chunk-VQGWH6RA.js").then(t=>t.HomeModule),canActivate:[m]},{path:"profile",loadChildren:()=>import("./chunk-O2SPFEQD.js").then(t=>t.ProfileModule),canActivate:[m]},{path:"services",loadChildren:()=>import("./chunk-ZOBZA5U3.js").then(t=>t.ServicesModule),canActivate:[m]},{path:"requests",loadChildren:()=>import("./chunk-V5ODAAT4.js").then(t=>t.RequestsModule),canActivate:[m]},{path:"messages",loadChildren:()=>import("./chunk-QPUUMRH3.js").then(t=>t.MessagesModule),canActivate:[m]},{path:"discover",loadChildren:()=>import("./chunk-R2QNUIOG.js").then(t=>t.DiscoverModule),canActivate:[m]},{path:"worker/:id",component:Me}]},{path:"auth",loadChildren:()=>import("./chunk-IHMYJMQL.js").then(t=>t.AuthModule)}],Re=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=p({type:t})}static{this.\u0275inj=c({imports:[C.forRoot(ze),C]})}}return t})();var Se=(()=>{class t{constructor(){this.title="sanai3i"}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=T({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(r,o){r&1&&E(0,"router-outlet")},dependencies:[U]})}}return t})();var Oe=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=p({type:t})}static{this.\u0275inj=c({imports:[me,C,L]})}}return t})();var R="Service workers are disabled or not supported by this browser";function He(t){return z(()=>te(new Error(t)))}var w=class{constructor(i){if(this.serviceWorker=i,!i)this.worker=this.events=this.registration=He(R);else{let r=H(i,"controllerchange").pipe(d(()=>i.controller)),o=z(()=>S(i.controller)),s=re(o,r);this.worker=s.pipe(y(g=>!!g)),this.registration=this.worker.pipe(A(()=>i.getRegistration()));let J=H(i,"message").pipe(d(g=>g.data)).pipe(y(g=>g&&g.type)).pipe(oe());J.connect(),this.events=J}}postMessage(i,e){return this.worker.pipe(u(1),ne(r=>{r.postMessage(Q({action:i},e))})).toPromise().then(()=>{})}postMessageWithOperation(i,e,r){let o=this.waitForOperationCompleted(r),s=this.postMessage(i,e);return Promise.all([s,o]).then(([,n])=>n)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(i){let e;return typeof i=="string"?e=r=>r.type===i:e=r=>i.includes(r.type),this.events.pipe(y(e))}nextEventOfType(i){return this.eventsOfType(i).pipe(u(1))}waitForOperationCompleted(i){return this.eventsOfType("OPERATION_COMPLETED").pipe(y(e=>e.nonce===i),u(1),d(e=>{if(e.result!==void 0)return e.result;throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},Fe=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,this.pushManager=null,this.subscriptionChanges=new ee,!e.isEnabled){this.messages=v,this.notificationClicks=v,this.subscription=v;return}this.messages=this.sw.eventsOfType("PUSH").pipe(d(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(d(o=>o.data)),this.pushManager=this.sw.registration.pipe(d(o=>o.pushManager));let r=this.pushManager.pipe(A(o=>o.getSubscription()));this.subscription=Z(r,this.subscriptionChanges)}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(R));let r={userVisibleOnly:!0},o=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(o.length));for(let n=0;n<o.length;n++)s[n]=o.charCodeAt(n);return r.applicationServerKey=s,this.pushManager.pipe(A(n=>n.subscribe(r)),u(1)).toPromise().then(n=>(this.subscriptionChanges.next(n),n))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(R));let e=r=>{if(r===null)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(o=>{if(!o)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(u(1),A(e)).toPromise()}decodeBase64(e){return atob(e)}static{this.\u0275fac=function(r){return new(r||t)(l(w))}}static{this.\u0275prov=a({token:t,factory:t.\u0275fac})}}return t})(),je=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=v,this.unrecoverable=v;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(R));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(R));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static{this.\u0275fac=function(r){return new(r||t)(l(w))}}static{this.\u0275prov=a({token:t,factory:t.\u0275fac})}}return t})();var Te=new ae("");function Ze(t,i,e,r){return()=>{if(!(X(r)&&"serviceWorker"in navigator&&e.enabled!==!1))return;navigator.serviceWorker.addEventListener("controllerchange",()=>{navigator.serviceWorker.controller!==null&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})});let o;if(typeof e.registrationStrategy=="function")o=e.registrationStrategy();else{let[n,...f]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(n){case"registerImmediately":o=S(null);break;case"registerWithDelay":o=De(+f[0]||0);break;case"registerWhenStable":o=f[0]?Z(Pe(t),De(+f[0])):Pe(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}t.get(M).runOutsideAngular(()=>o.pipe(u(1)).subscribe(()=>navigator.serviceWorker.register(i,{scope:e.scope}).catch(n=>console.error("Service worker registration failed with:",n))))}}function De(t){return S(null).pipe(ie(t))}function Pe(t){return t.get(ue).isStable.pipe(y(e=>e))}function Ke(t,i){return new w(X(i)&&t.enabled!==!1?navigator.serviceWorker:void 0)}var N=class{};function Ye(t,i={}){return D([Fe,je,{provide:Te,useValue:t},{provide:N,useValue:i},{provide:w,useFactory:Ke,deps:[N,K]},{provide:de,useFactory:Ze,deps:[ce,Te,N,K],multi:!0}])}var ke=(()=>{class t{static register(e,r={}){return{ngModule:t,providers:[Ye(e,r)]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=p({type:t})}static{this.\u0275inj=c({providers:[Fe,je]})}}return t})();var Ge=(()=>{class t extends B{constructor(e,r,o){super(e,r,o,O(P,{optional:!0}))}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(r){return new(r||t)(l(j),l(I),l(V))}}static{this.\u0275prov=a({token:t,factory:t.\u0275fac})}}return t})();function $e(){return new be}function Xe(t,i,e){return new Ce(t,i,e)}var Ue=[{provide:V,useFactory:$e},{provide:B,useClass:Ge},{provide:F,useFactory:Xe,deps:[k,B,M]}],_e=[{provide:I,useFactory:()=>new Ee},{provide:b,useValue:"BrowserAnimations"},...Ue],qe=[{provide:I,useClass:Ae},{provide:b,useValue:"NoopAnimations"},...Ue],We=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?qe:_e}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=p({type:t})}static{this.\u0275inj=c({providers:_e,imports:[_]})}}return t})();var Je="@",Qe=(()=>{class t{constructor(e,r,o,s,n){this.doc=e,this.delegate=r,this.zone=o,this.animationType=s,this.moduleImpl=n,this._rendererFactoryPromise=null,this.scheduler=O(P,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-NVR5P7N7.js")).catch(r=>{throw new se(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:o})=>{this._engine=r(this.animationType,this.doc,this.scheduler);let s=new o(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(e,r){let o=this.delegate.createRenderer(e,r);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let s=new q(o);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(n=>{let f=n.createRenderer(e,r);s.use(f)}).catch(n=>{s.use(o)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(r){le()}}static{this.\u0275prov=a({token:t,factory:t.\u0275fac})}}return t})(),q=class{constructor(i){this.delegate=i,this.replay=[],this.\u0275type=1}use(i){if(this.delegate=i,this.replay!==null){for(let e of this.replay)e(i);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(i,e){return this.delegate.createElement(i,e)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}get destroyNode(){return this.delegate.destroyNode}appendChild(i,e){this.delegate.appendChild(i,e)}insertBefore(i,e,r,o){this.delegate.insertBefore(i,e,r,o)}removeChild(i,e,r){this.delegate.removeChild(i,e,r)}selectRootElement(i,e){return this.delegate.selectRootElement(i,e)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,e,r,o){this.delegate.setAttribute(i,e,r,o)}removeAttribute(i,e,r){this.delegate.removeAttribute(i,e,r)}addClass(i,e){this.delegate.addClass(i,e)}removeClass(i,e){this.delegate.removeClass(i,e)}setStyle(i,e,r,o){this.delegate.setStyle(i,e,r,o)}removeStyle(i,e,r){this.delegate.removeStyle(i,e,r)}setProperty(i,e,r){this.shouldReplay(e)&&this.replay.push(o=>o.setProperty(i,e,r)),this.delegate.setProperty(i,e,r)}setValue(i,e){this.delegate.setValue(i,e)}listen(i,e,r){return this.shouldReplay(e)&&this.replay.push(o=>o.listen(i,e,r)),this.delegate.listen(i,e,r)}shouldReplay(i){return this.replay!==null&&i.startsWith(Je)}};function xe(t="animations"){return G("NgAsyncAnimations"),D([{provide:F,useFactory:(i,e,r)=>new Qe(i,e,r,t),deps:[j,k,M]},{provide:b,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Le=(()=>{class t{intercept(e,r){return e.url.includes("nominatim.openstreetmap.org")&&(e=e.clone({setHeaders:{"User-Agent":"SanayeiyApp/1.0",Accept:"application/json"}})),r.handle(e)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=a({token:t,factory:t.\u0275fac})}}return t})();var Ve=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=p({type:t,bootstrap:[Se]})}static{this.\u0275inj=c({providers:[{provide:fe,useClass:Le,multi:!0},xe()],imports:[_,ge,Oe,L,Re,We,we,ke.register("ngsw-worker.js",{enabled:!he(),registrationStrategy:"registerWhenStable:30000"})]})}}return t})();ve().bootstrapModule(Ve).catch(t=>console.error(t));
