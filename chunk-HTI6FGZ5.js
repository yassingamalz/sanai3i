import{a as me}from"./chunk-O5N4QGVW.js";import{a as j}from"./chunk-EBA7YD7D.js";import{a as de}from"./chunk-DEJI4HZG.js";import{d as pe,z as _e}from"./chunk-RRCAZJL3.js";import{K as he,j as A,m as le,p as ue,r as ge,v as fe}from"./chunk-MRU5PUU6.js";import{$a as M,A as U,Ab as p,Bb as _,Ca as Z,Cb as v,Da as ee,Db as k,Dc as O,Ec as P,Fb as f,Gb as g,J as q,Jc as ce,Kb as L,Lb as B,Mb as D,O as J,Ob as m,P as H,Pb as h,Qb as w,Rb as re,Rc as V,Sb as oe,Sc as $,Tb as ae,Ub as se,Va as te,Vc as I,Wc as T,Xa as ne,Xb as b,Xc as Q,Y as R,Ya as ie,_a as o,a as G,b as Y,ca as K,l as E,ma as y,na as X,qb as u,sb as c,ub as F,va as C,vb as z,wa as S,yb as r,zb as a}from"./chunk-CXH3PM2I.js";var ye=()=>[1,2,3];function we(i,l){i&1&&p(0,"i",13)}function Oe(i,l){i&1&&p(0,"div",14)}function Pe(i,l){if(i&1){let e=k();r(0,"i",15),f("click",function(){C(e);let t=g();return S(t.clearSearch())}),a()}}function Ie(i,l){i&1&&(r(0,"div",20),p(1,"div",21),r(2,"div",22),p(3,"div",23)(4,"div",24),a()())}function Te(i,l){i&1&&(_(0),u(1,Ie,5,0,"div",19),v()),i&2&&(o(),c("ngForOf",b(1,ye)))}function Ee(i,l){if(i&1){let e=k();r(0,"div",26),f("mouseenter",function(){let t=C(e).index,s=g(3);return S(s.selectedResultIndex=t)})("click",function(){let t=C(e).$implicit,s=g(3);return S(s.navigateToSubService(t.mainServiceId,t.id))}),p(1,"i",27),r(2,"div",22)(3,"h4",28),m(4),a(),r(5,"p",29)(6,"span",30),m(7),a(),r(8,"span",31),m(9,"\u2022"),a(),r(10,"span",32),m(11),a()()()()}if(i&2){let e,n,t=l.$implicit,s=l.index,d=g(3);F("selected",s===d.selectedResultIndex),o(),z(((e=d.getMainService(t.mainServiceId))==null?null:e.faIcon)||"fas fa-circle"),o(3),h(t.name),o(3),h((n=d.getMainService(t.mainServiceId))==null?null:n.name),o(4),w("",t.price," \u062C\u0646\u064A\u0647")}}function Re(i,l){if(i&1&&(_(0),u(1,Ee,12,7,"div",25),v()),i&2){let e=g(2);o(),c("ngForOf",e.searchResults)("ngForTrackBy",e.trackBySearchResult)}}function Fe(i,l){i&1&&(r(0,"div",33),p(1,"i",34),r(2,"p"),m(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0646\u062A\u0627\u0626\u062C \u062A\u0637\u0627\u0628\u0642 \u0628\u062D\u062B\u0643"),a(),r(4,"p",35),m(5,"\u062D\u0627\u0648\u0644 \u0627\u0644\u0628\u062D\u062B \u0628\u0643\u0644\u0645\u0627\u062A \u0645\u062E\u062A\u0644\u0641\u0629"),a()())}function He(i,l){if(i&1&&(r(0,"div",16),u(1,Te,2,2,"ng-container",17)(2,Re,2,2,"ng-container",17)(3,Fe,6,0,"div",18),a()),i&2){let e=g();o(),c("ngIf",e.isSearching),o(),c("ngIf",!e.isSearching&&e.searchResults.length>0),o(),c("ngIf",!e.isSearching&&e.searchResults.length===0&&e.searchQuery)}}var xe=(()=>{class i{constructor(e,n,t){this.router=e,this.servicesService=n,this.elementRef=t,this.services=[],this.mainServicesMap=new Map,this.searchQuery="",this.searchResults=[],this.isSearching=!1,this.showResults=!1,this.selectedResultIndex=-1,this.searchSubject=new E,this.searchCache=new Map,this.destroy$=new E}ngOnInit(){this.setupSearchSubscription()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}handleClickOutside(e){this.elementRef.nativeElement.contains(e.target)||(this.showResults=!1,this.selectedResultIndex=-1)}handleKeyboardNavigation(e){if(this.showResults)switch(e.key){case"ArrowDown":e.preventDefault(),this.selectedResultIndex=Math.min(this.selectedResultIndex+1,this.searchResults.length-1),this.scrollToSelectedResult();break;case"ArrowUp":e.preventDefault(),this.selectedResultIndex=Math.max(this.selectedResultIndex-1,-1),this.scrollToSelectedResult();break;case"Enter":if(this.selectedResultIndex>=0&&this.searchResults[this.selectedResultIndex]){let n=this.searchResults[this.selectedResultIndex];this.navigateToSubService(n.mainServiceId,n.id)}break;case"Escape":this.showResults=!1,this.selectedResultIndex=-1;break}}setupSearchSubscription(){this.searchSubject.pipe(q(300),J(),R(this.destroy$)).subscribe(e=>{this.performSearch(e)})}onSearch(e){let n=e.target;this.searchQuery=n.value,this.selectedResultIndex=-1,this.searchQuery.trim()?(this.showResults=!0,this.searchSubject.next(this.searchQuery)):(this.searchResults=[],this.showResults=!1)}performSearch(e){if(!e.trim()){this.searchResults=[],this.isSearching=!1;return}let n=this.searchCache.get(e);if(n){this.searchResults=n;return}this.isSearching=!0;let t=e.toLowerCase(),s=[];if(this.services.forEach(d=>{d.subServices?.forEach(x=>{this.matchesSearch(x,t)&&s.push(x)})}),s.length>0){this.searchResults=s,this.searchCache.set(e,s),this.isSearching=!1;return}this.servicesService.searchServices(e).pipe(R(this.destroy$),H(()=>{this.isSearching=!1})).subscribe({next:d=>{s=d.flatMap(x=>(x.subServices||[]).filter(W=>this.matchesSearch(W,t))),this.searchResults=s,this.searchCache.set(e,s)},error:d=>{console.error("Search error:",d),this.searchResults=[]}})}matchesSearch(e,n){return e.name.toLowerCase().includes(n)||e.description.toLowerCase().includes(n)}clearSearch(){this.searchQuery="",this.searchResults=[],this.showResults=!1,this.selectedResultIndex=-1}navigateToSubService(e,n){this.router.navigate(["/services",e,"sub-service",n]),this.showResults=!1,this.clearSearch()}scrollToSelectedResult(){if(this.selectedResultIndex>=0){let n=document.querySelectorAll(".search-result-item")[this.selectedResultIndex];n&&n.scrollIntoView({behavior:"smooth",block:"nearest"})}}getMainService(e){return this.mainServicesMap.get(e)}trackBySearchResult(e,n){return`${n.mainServiceId}-${n.id}`}static{this.\u0275fac=function(n){return new(n||i)(M(A),M(j),M(Z))}}static{this.\u0275cmp=y({type:i,selectors:[["app-search-header"]],hostBindings:function(n,t){n&1&&f("click",function(d){return t.handleClickOutside(d)},!1,ie)("keydown",function(d){return t.handleKeyboardNavigation(d)},!1,ne)},inputs:{services:"services",mainServicesMap:"mainServicesMap"},decls:14,vars:6,consts:[[1,"bg-[#ef4444]"],[1,"px-4","pt-8","pb-3"],[1,"search-container"],[1,"bg-white","rounded-full","flex","items-center","h-11","shadow-sm","relative"],[1,"flex-1","text-gray-700","text-sm","mr-4","text-right","relative"],["type","text",1,"search-input","w-full","pr-10","pl-4",3,"ngModelChange","input","focus","placeholder","ngModel"],["class","fas fa-search text-gray-400 absolute right-3 top-1/2 -translate-y-1/2",4,"ngIf"],["class","search-spinner absolute right-3 top-1/2 -translate-y-1/2",4,"ngIf"],["class","fas fa-times text-gray-400 absolute left-3 top-1/2 -translate-y-1/2 cursor-pointer",3,"click",4,"ngIf"],[1,"flex","items-center","ml-4"],[1,"fas","fa-home","text-[#ef4444]","text-lg"],[1,"text-[#ef4444]","mr-2","font-medium"],["class","search-results-dropdown",4,"ngIf"],[1,"fas","fa-search","text-gray-400","absolute","right-3","top-1/2","-translate-y-1/2"],[1,"search-spinner","absolute","right-3","top-1/2","-translate-y-1/2"],[1,"fas","fa-times","text-gray-400","absolute","left-3","top-1/2","-translate-y-1/2","cursor-pointer",3,"click"],[1,"search-results-dropdown"],[4,"ngIf"],["class","no-results",4,"ngIf"],["class","search-result-item shimmer",4,"ngFor","ngForOf"],[1,"search-result-item","shimmer"],[1,"skeleton-icon"],[1,"flex-1"],[1,"skeleton-text","w-3/4"],[1,"skeleton-text","w-1/2"],["class","search-result-item",3,"selected","mouseenter","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"search-result-item",3,"mouseenter","click"],[1,"service-icon"],[1,"result-title"],[1,"result-subtitle"],[1,"main-service-name"],[1,"separator"],[1,"price"],[1,"no-results"],[1,"fas","fa-search","text-gray-400","mb-2","text-lg"],[1,"text-sm","text-gray-500","mt-1"]],template:function(n,t){n&1&&(r(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4)(5,"input",5),se("ngModelChange",function(d){return ae(t.searchQuery,d)||(t.searchQuery=d),d}),f("input",function(d){return t.onSearch(d)})("focus",function(){return t.showResults=!0}),a(),u(6,we,1,0,"i",6)(7,Oe,1,0,"div",7)(8,Pe,1,0,"i",8),a(),r(9,"div",9),p(10,"i",10),r(11,"span",11),m(12,"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629"),a()()(),u(13,He,4,3,"div",12),a()()()),n&2&&(o(5),c("placeholder","\u0627\u0644\u0628\u062D\u062B \u0639\u0646 \u062E\u062F\u0645\u0629"),oe("ngModel",t.searchQuery),o(),c("ngIf",!t.isSearching),o(),c("ngIf",t.isSearching),o(),c("ngIf",t.searchQuery),o(5),c("ngIf",t.showResults&&(t.isSearching||t.searchResults.length>0||t.searchQuery)))},dependencies:[O,P,ue,ge,fe],styles:[".search-container[_ngcontent-%COMP%]{position:relative;width:100%;z-index:50}.search-input[_ngcontent-%COMP%]{height:100%;background:transparent;border:none;outline:none;text-align:right;direction:rtl;font-size:1rem;color:#1f2937}.search-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.search-results-dropdown[_ngcontent-%COMP%]{position:absolute;top:calc(100% + .5rem);left:0;right:0;background:#fff;border-radius:1rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;max-height:400px;overflow-y:auto;padding:.5rem;z-index:50}.search-results-dropdown[_ngcontent-%COMP%]:empty{display:none}.search-result-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.75rem;border-radius:.5rem;cursor:pointer;transition:background-color .2s ease}.search-result-item[_ngcontent-%COMP%]:hover, .search-result-item.selected[_ngcontent-%COMP%]{background-color:#f3f4f6}.search-result-item[_ngcontent-%COMP%]   .service-icon[_ngcontent-%COMP%]{font-size:1.25rem;color:#ef4444;min-width:24px;text-align:center}.search-result-item[_ngcontent-%COMP%]   .result-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#1f2937;margin-bottom:.25rem}.search-result-item[_ngcontent-%COMP%]   .result-subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280;display:flex;align-items:center;gap:.5rem}.search-result-item[_ngcontent-%COMP%]   .result-subtitle[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{color:#9ca3af}.search-result-item[_ngcontent-%COMP%]   .result-subtitle[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:#059669}.no-results[_ngcontent-%COMP%]{text-align:center;padding:2rem 1rem;color:#6b7280}.no-results[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:block;font-size:1.5rem;margin-bottom:.5rem}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-of-type{color:#374151;font-weight:500}.search-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #f3f4f6;border-top-color:#ef4444;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-468px 0}to{background-position:468px 0}}.shimmer[_ngcontent-%COMP%]{background:#f6f7f8;background-image:linear-gradient(to right,#f6f7f8,#edeef1 20%,#f6f7f8 40% 100%);background-repeat:no-repeat;background-size:800px 104px;animation-duration:1.5s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:_ngcontent-%COMP%_shimmer;animation-timing-function:linear}.skeleton-icon[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%}.skeleton-text[_ngcontent-%COMP%]{height:.875rem;border-radius:.25rem;margin-bottom:.25rem}.skeleton-text[_ngcontent-%COMP%]:last-child{margin-bottom:0}"]})}}return i})();var Le=["serviceCard"],Be=()=>[1,2,3,4,5,6];function De(i,l){i&1&&(r(0,"div",10),p(1,"div",11)(2,"div",12)(3,"div",13),a())}function Ae(i,l){i&1&&(_(0),u(1,De,4,0,"div",9),v()),i&2&&(o(),c("ngForOf",b(1,Be)))}function Ve(i,l){if(i&1){let e=k();r(0,"div",15,0),f("click",function(){let t=C(e).$implicit,s=g(2);return S(s.openService(t.id))}),r(2,"div",16),m(3),a(),r(4,"h3",17),m(5),a(),r(6,"p",18),m(7),a()()}if(i&2){let e=l.$implicit,n=l.index,t=g(2);c("@fadeInUp",t.shouldAnimate(n)?"in":"void"),o(3),h(e.icon),o(2),h(e.name),o(2),h(e.description)}}function $e(i,l){if(i&1&&(_(0),u(1,Ve,8,4,"div",14),v()),i&2){let e=g();o(),c("ngForOf",e.services)("ngForTrackBy",e.trackByServiceId)}}var Ce=(()=>{class i{constructor(){this.services=[],this.isLoading=!0,this.cardStates={},this.serviceClick=new ee}shouldAnimate(e){return!this.isLoading&&this.cardStates[e]}openService(e){this.serviceClick.emit(e)}navigateToFullList(){this.serviceClick.emit(-1)}trackByServiceId(e,n){return n.id}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=y({type:i,selectors:[["app-services-grid"]],viewQuery:function(n,t){if(n&1&&L(Le,5),n&2){let s;B(s=D())&&(t.serviceCards=s)}},inputs:{services:"services",isLoading:"isLoading",cardStates:"cardStates"},outputs:{serviceClick:"serviceClick"},decls:10,vars:2,consts:[["serviceCard",""],[1,"content-section"],[1,"section-header"],[1,"header-content"],[1,"section-title"],[1,"header-icons",3,"click"],[1,"fas","fa-chevron-left"],[1,"services-grid"],[4,"ngIf"],["class","skeleton-grid-card",4,"ngFor","ngForOf"],[1,"skeleton-grid-card"],[1,"skeleton-icon","shimmer"],[1,"skeleton-text","shimmer","w-2/3","mx-auto"],[1,"skeleton-text","shimmer","w-3/4","mx-auto"],["class","grid-card",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid-card",3,"click"],[1,"service-icon"],[1,"card-title"],[1,"card-subtitle"]],template:function(n,t){n&1&&(r(0,"section",1)(1,"div",2)(2,"div",3)(3,"h2",4),m(4,"\u0643\u0644 \u0627\u0644\u062E\u062F\u0645\u0627\u062A"),a(),r(5,"div",5),f("click",function(){return t.navigateToFullList()}),p(6,"i",6),a()()(),r(7,"div",7),u(8,Ae,2,2,"ng-container",8)(9,$e,2,2,"ng-container",8),a()()),n&2&&(o(8),c("ngIf",t.isLoading),o(),c("ngIf",!t.isLoading))},dependencies:[O,P],styles:["[_nghost-%COMP%]{display:block}.content-section[_ngcontent-%COMP%]{padding:.5rem 1rem;margin-bottom:1rem}.section-header[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;padding:1rem;transition:background-color .2s ease;border-radius:.5rem}.section-header[_ngcontent-%COMP%]:hover{background-color:#e24c4c0d}.section-header[_ngcontent-%COMP%]:hover   .fa-chevron-left[_ngcontent-%COMP%]{color:#ef4444}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0 .5rem}.header-icons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#1f2937}.services-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;transition:all .3s ease-in-out}.grid-card[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:1.5rem 1rem;text-align:center;box-shadow:0 4px 6px -1px #0000000d,0 2px 4px -1px #00000008,0 10px 15px -3px #0000000d;transition:transform .2s ease,box-shadow .2s ease}.grid-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 20px -5px #e24c4c1a,0 4px 6px -2px #0000000d}.grid-card[_ngcontent-%COMP%]   .service-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:.75rem}.card-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#1f2937;margin-bottom:.25rem}.card-subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;line-height:1.25}.fa-chevron-left[_ngcontent-%COMP%]{transition:transform .3s ease;color:#9ca3af;font-size:1rem}.skeleton-grid-card[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:1.5rem 1rem;height:140px;overflow:hidden;text-align:center;box-shadow:0 4px 6px -1px #0000000d,0 2px 4px -1px #00000008,0 10px 15px -3px #0000000d}.skeleton-icon[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border-radius:.5rem;margin:0 auto .75rem}.skeleton-text[_ngcontent-%COMP%]{height:1rem;margin-bottom:.5rem;border-radius:.25rem}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-468px 0}to{background-position:468px 0}}.shimmer[_ngcontent-%COMP%]{background:#f6f7f8;background-image:linear-gradient(to right,#f6f7f8,#edeef1 20%,#f6f7f8 40% 100%);background-repeat:no-repeat;background-size:800px 104px;animation-duration:1.5s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:_ngcontent-%COMP%_shimmer;animation-timing-function:linear}@media (max-width: 640px){.services-grid[_ngcontent-%COMP%]{gap:.75rem}.grid-card[_ngcontent-%COMP%]{padding:1rem}.section-title[_ngcontent-%COMP%]{font-size:1.125rem}}"],data:{animation:[V("fadeInUp",[T("void",I({opacity:0,transform:"translateY(20px)"})),T("in",I({opacity:1,transform:"translateY(0)"})),Q("void => in",[$("0.8s 0.3s ease-out")])])]}})}}return i})();var je=["serviceCard"],Se=()=>[1,2,3];function We(i,l){i&1&&(r(0,"div",14),p(1,"div",15),r(2,"div",16),p(3,"div",17)(4,"div",18)(5,"div",19),a()())}function Ne(i,l){i&1&&(_(0),u(1,We,6,0,"div",13),v()),i&2&&(o(),c("ngForOf",b(1,Se)))}function Ge(i,l){if(i&1){let e=k();r(0,"div",21),f("click",function(){let t=C(e).$implicit,s=g(2);return S(s.onWorkerClick(t))}),p(1,"img",22),r(2,"div",23)(3,"h3",24),m(4),a(),r(5,"p",25),m(6),a(),r(7,"div",26),p(8,"i",27),r(9,"span"),m(10),a()()(),p(11,"i",28),a()}if(i&2){let e=l.$implicit;o(),c("src",e.image,te)("alt",e.name),o(3),h(e.name),o(2),h(e.service),o(4),re("",e.rating," \u2022 ",e.completedJobs," \u062E\u062F\u0645\u0629")}}function Ye(i,l){if(i&1&&(_(0),u(1,Ge,12,6,"div",20),v()),i&2){let e=g();o(),c("ngForOf",e.topWorkers)("ngForTrackBy",e.trackByWorkerId)}}function Ue(i,l){if(i&1&&(r(0,"span",29),m(1),a()),i&2){let e=g();o(),w("",e.topSubServices[0].totalRequests||0," \u0637\u0644\u0628")}}function qe(i,l){i&1&&(r(0,"div",31)(1,"div",32),p(2,"div",17)(3,"div",33),a()())}function Je(i,l){i&1&&(_(0),u(1,qe,4,0,"div",30),v()),i&2&&(o(),c("ngForOf",b(1,Se)))}function Ke(i,l){if(i&1){let e=k();r(0,"div",35),f("click",function(){let t=C(e).$implicit,s=g(2);return S(s.navigateToSubService(t.mainServiceId,t.id))}),r(1,"div",32)(2,"div",36)(3,"div",37),p(4,"i",38),r(5,"h3",24),m(6),a()(),r(7,"div",39)(8,"span",29),m(9),a(),r(10,"span",40),m(11,"\u2022"),a(),r(12,"span",40),m(13),a()()(),r(14,"div",41),p(15,"i",42),r(16,"span",43),m(17),a()()()()}if(i&2){let e,n,t=l.$implicit,s=g(2);o(4),z((e=s.getMainService(t.mainServiceId))==null?null:e.faIcon),o(2),h(t.name),o(3),w("",t.totalRequests," \u0637\u0644\u0628"),o(4),h((n=s.getMainService(t.mainServiceId))==null?null:n.name),o(2),F("fa-arrow-trend-up",t.trend==="up")("fa-arrow-trend-down",t.trend==="down")("text-success",t.trend==="up")("text-danger",t.trend==="down"),o(),F("text-success",t.trend==="up")("text-danger",t.trend==="down"),o(),w(" ",t.trendValue,"% ")}}function Xe(i,l){if(i&1&&(_(0),u(1,Ke,18,18,"div",34),v()),i&2){let e=g();o(),c("ngForOf",e.topSubServices)("ngForTrackBy",e.trackBySubServiceId)}}var Me=(()=>{class i{constructor(e,n,t){this.router=e,this.workerService=n,this.servicesService=t,this.services=[],this.topSubServices=[],this.topWorkers=[],this.mainServicesMap=new Map,this.cardStates={},this.isLoading=!0,this.errorMessage=null,this.destroy$=new E}ngOnInit(){this.loadInitialData()}ngAfterViewInit(){setTimeout(()=>{this.initializeAnimations()},100)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadInitialData(){this.isLoading=!0,this.errorMessage=null;let e=this.servicesService.getAllServices(),n=this.workerService.getTopWorkers(3);U({services:e,workers:n}).pipe(R(this.destroy$),H(()=>{setTimeout(()=>{this.isLoading=!1,this.initializeAnimations()},300)})).subscribe({next:({services:t,workers:s})=>{this.services=t,this.topWorkers=s,this.processTrendySubServices(t),this.services.forEach((d,x)=>{this.cardStates[x]=!1})},error:t=>{console.error("Error loading data:",t),this.errorMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A. \u064A\u0631\u062C\u0649 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649.",this.isLoading=!1}})}processTrendySubServices(e){let n=[];e.forEach(t=>{this.mainServicesMap.set(t.id,t);let{totalRequests:s,trend:d,trendValue:x}=t;t.subServices?.forEach(W=>{s&&d&&x&&n.push(Y(G({},W),{totalRequests:s,trend:d,trendValue:x}))})}),this.topSubServices=n.sort((t,s)=>s.totalRequests-t.totalRequests).slice(0,3)}initializeAnimations(){this.services.length&&this.services.forEach((e,n)=>{setTimeout(()=>{this.cardStates[n]=!0},n*100)})}onServiceAction(e){e===-1?this.navigateToFullList("all-services"):this.openService(e)}navigateToFullList(e){this.router.navigate(["/services",e])}openService(e){this.router.navigate(["/services",e])}navigateToSubService(e,n){this.router.navigate(["/services",e,"sub-service",n])}onWorkerClick(e){this.router.navigate(["/worker",e.id])}getMainService(e){return this.mainServicesMap.get(e)}trackByWorkerId(e,n){return n.id}trackBySubServiceId(e,n){return`${n.mainServiceId}-${n.id}`}handleServiceClick(e){e===-1?this.navigateToFullList("all-services"):this.openService(e)}static{this.\u0275fac=function(n){return new(n||i)(M(A),M(de),M(j))}}static{this.\u0275cmp=y({type:i,selectors:[["app-home"]],viewQuery:function(n,t){if(n&1&&L(je,5),n&2){let s;B(s=D())&&(t.serviceCards=s)}},decls:26,vars:10,consts:[[1,"min-h-screen","bg-gray-50"],[3,"services","mainServicesMap"],[3,"serviceClick","services","isLoading","cardStates"],[1,"content-section"],[1,"section-header"],[1,"header-content"],[1,"section-title"],[1,"header-icons"],[1,"fas","fa-chevron-left"],[1,"cards-container"],[4,"ngIf"],[1,"header-title"],["class","request-count",4,"ngIf"],["class","worker-card",4,"ngFor","ngForOf"],[1,"worker-card"],[1,"skeleton-circle","shimmer"],[1,"flex-1"],[1,"skeleton-text","shimmer","w-2/3"],[1,"skeleton-text","shimmer","w-1/2"],[1,"skeleton-text","shimmer","w-1/3"],["class","worker-card",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"worker-card",3,"click"],[1,"worker-image",3,"src","alt"],[1,"worker-info"],[1,"card-title"],[1,"card-subtitle"],[1,"rating"],[1,"fas","fa-star"],[1,"fas","fa-chevron-right","arrow-icon"],[1,"request-count"],["class","skeleton-card",4,"ngFor","ngForOf"],[1,"skeleton-card"],[1,"service-content"],[1,"skeleton-text","shimmer","w-1/4"],["class","service-card",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"service-card",3,"click"],[1,"service-info"],[1,"flex","items-center","gap-2"],[1,"text-[#ef4444]"],[1,"flex","items-center","gap-2","mt-1"],[1,"text-sm","text-gray-500"],[1,"trend-container"],[1,"fa-solid"],[1,"trend-value"]],template:function(n,t){n&1&&(r(0,"div",0),p(1,"app-search-header",1)(2,"app-featured-slider"),r(3,"app-services-grid",2),f("serviceClick",function(d){return t.handleServiceClick(d)}),a(),r(4,"section",3)(5,"div",4)(6,"div",5)(7,"h2",6),m(8,"\u0623\u0641\u0636\u0644 \u0627\u0644\u0635\u0646\u0627\u064A\u0639\u064A\u0629"),a(),r(9,"div",7),p(10,"i",8),a()()(),r(11,"div",9),u(12,Ne,2,2,"ng-container",10)(13,Ye,2,2,"ng-container",10),a()(),r(14,"section",3)(15,"div",4)(16,"div",5)(17,"div",11)(18,"h2",6),m(19,"\u0627\u0644\u062E\u062F\u0645\u0627\u062A \u0627\u0644\u0623\u0643\u062B\u0631 \u0637\u0644\u0628\u0627\u064B"),a(),u(20,Ue,2,1,"span",12),a(),r(21,"div",7),p(22,"i",8),a()()(),r(23,"div",9),u(24,Je,2,2,"ng-container",10)(25,Xe,2,2,"ng-container",10),a()()()),n&2&&(o(),c("services",t.services)("mainServicesMap",t.mainServicesMap),o(2),c("services",t.services)("isLoading",t.isLoading)("cardStates",t.cardStates),o(9),c("ngIf",t.isLoading),o(),c("ngIf",!t.isLoading),o(7),c("ngIf",!t.isLoading),o(4),c("ngIf",t.isLoading),o(),c("ngIf",!t.isLoading))},dependencies:[O,P,pe,xe,Ce],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;background-color:#f8f9fa;padding-bottom:5rem;overflow-x:hidden}.skeleton-card[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:1.25rem;margin-bottom:.75rem;height:100px;overflow:hidden;box-shadow:0 4px 6px -1px #0000000d,0 2px 4px -1px #00000008,0 10px 15px -3px #0000000d}.skeleton-grid-card[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:1.5rem 1rem;height:140px;overflow:hidden;text-align:center;box-shadow:0 4px 6px -1px #0000000d,0 2px 4px -1px #00000008,0 10px 15px -3px #0000000d}.skeleton-text[_ngcontent-%COMP%]{height:1rem;margin-bottom:.5rem;border-radius:.25rem}.skeleton-circle[_ngcontent-%COMP%]{width:4rem;height:4rem;border-radius:50%;margin-right:1rem}.skeleton-icon[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border-radius:.5rem;margin:0 auto .75rem}.home-container[_ngcontent-%COMP%]{max-width:768px;margin:0 auto;padding-bottom:80px}.section-header[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;padding:1rem;transition:background-color .2s ease;border-radius:.5rem}.section-header[_ngcontent-%COMP%]:hover{background-color:#e24c4c0d}.section-header[_ngcontent-%COMP%]:hover   .fa-chevron-left[_ngcontent-%COMP%]{color:#ef4444}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0 .5rem}.header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.header-icons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#1f2937}.content-section[_ngcontent-%COMP%]{padding:.5rem 1rem;margin-bottom:1rem}.cards-container[_ngcontent-%COMP%]{transition:all .3s ease-in-out;max-height:2000px;opacity:1;overflow:hidden}.cards-container.collapsed[_ngcontent-%COMP%]{max-height:0;opacity:0;margin:0;padding:0}.service-card[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:1.25rem;margin-bottom:.75rem;box-shadow:0 4px 6px -1px #0000000d,0 2px 4px -1px #00000008,0 10px 15px -3px #0000000d;transition:transform .2s ease,box-shadow .2s ease}.service-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 20px -5px #e24c4c1a,0 4px 6px -2px #0000000d}.service-card[_ngcontent-%COMP%]   .service-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.service-card[_ngcontent-%COMP%]   .service-info[_ngcontent-%COMP%]{text-align:right}.worker-card[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:1.25rem;margin-bottom:.75rem;display:flex;align-items:center;gap:1rem;box-shadow:0 4px 6px -1px #0000000d,0 2px 4px -1px #00000008,0 10px 15px -3px #0000000d;transition:transform .2s ease,box-shadow .2s ease}.worker-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 20px -5px #e24c4c1a,0 4px 6px -2px #0000000d}.worker-image[_ngcontent-%COMP%]{width:4rem;height:4rem;border-radius:9999px;object-fit:cover}.worker-info[_ngcontent-%COMP%]{flex:1;text-align:right}.rating[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.875rem;color:#6b7280;margin-top:.25rem}.rating[_ngcontent-%COMP%]   .fa-star[_ngcontent-%COMP%]{color:#fbbf24}.services-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;transition:all .3s ease-in-out}.services-grid.collapsed[_ngcontent-%COMP%]{max-height:0;opacity:0;margin:0;padding:0}.grid-card[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:1.5rem 1rem;text-align:center;box-shadow:0 4px 6px -1px #0000000d,0 2px 4px -1px #00000008,0 10px 15px -3px #0000000d;transition:transform .2s ease,box-shadow .2s ease}.grid-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 20px -5px #e24c4c1a,0 4px 6px -2px #0000000d}.grid-card[_ngcontent-%COMP%]   .service-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:.75rem}.card-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#1f2937;margin-bottom:.25rem}.card-subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;line-height:1.25}.request-count[_ngcontent-%COMP%]{font-size:.875rem;color:#085e0c;padding:.25rem .75rem;background-color:#13ba2c1a;border-radius:999px;white-space:nowrap}.fa-chevron-left[_ngcontent-%COMP%]{transition:transform .3s ease;color:#9ca3af;font-size:1rem}.fa-chevron-left.rotate-90[_ngcontent-%COMP%]{transform:rotate(-90deg)}.arrow-icon[_ngcontent-%COMP%]{color:#9ca3af;font-size:1rem}.trend-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.trend-container[_ngcontent-%COMP%]   .trend-value[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500}.trend-container[_ngcontent-%COMP%]   .text-success[_ngcontent-%COMP%]{color:#10b981}.trend-container[_ngcontent-%COMP%]   .text-danger[_ngcontent-%COMP%], .text-primary[_ngcontent-%COMP%]{color:#ef4444}.text-success[_ngcontent-%COMP%]{color:#10b981}.text-danger[_ngcontent-%COMP%]{color:#ef4444}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-468px 0}to{background-position:468px 0}}.shimmer[_ngcontent-%COMP%]{background:#f6f7f8;background-image:linear-gradient(to right,#f6f7f8,#edeef1 20%,#f6f7f8 40% 100%);background-repeat:no-repeat;background-size:800px 104px;animation-duration:1.5s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:_ngcontent-%COMP%_shimmer;animation-timing-function:linear}@media (max-width: 640px){.services-grid[_ngcontent-%COMP%]{gap:.75rem}.grid-card[_ngcontent-%COMP%]{padding:1rem}.section-title[_ngcontent-%COMP%]{font-size:1.125rem}.worker-image[_ngcontent-%COMP%], .skeleton-circle[_ngcontent-%COMP%]{width:3.5rem;height:3.5rem}}"],data:{animation:[V("fadeInUp",[T("void",I({opacity:0,transform:"translateY(20px)"})),T("in",I({opacity:1,transform:"translateY(0)"})),Q("void => in",[$("0.8s 0.3s ease-out")])])]}})}}return i})();var Ht=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=X({type:i})}static{this.\u0275inj=K({imports:[ce,_e,he,le.forChild([{path:"",component:Me},{path:"worker/:id",component:me,data:{scrollPositionRestoration:"top"}}])]})}}return i})();export{Ht as HomeModule};
